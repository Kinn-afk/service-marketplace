{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/lib/db.js"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool({\r\n  host: 'localhost',\r\n  user: 'root',\r\n  password: '', \r\n  database: 'service_marketplace',\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,wKAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/app/api/bookings/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport db from '@/lib/db';\r\n\r\nexport async function GET(request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const userId = searchParams.get('userId');\r\n\r\n    if (!userId) {\r\n      return NextResponse.json({ bookings: [] });\r\n    }\r\n\r\n    const [bookings] = await db.execute(`\r\n      SELECT b.*, s.title as service_title, s.hourly_rate, s.provider_id,\r\n             u1.name as customer_name, u1.email as customer_email,\r\n             u2.name as provider_name, u2.email as provider_email\r\n      FROM bookings b\r\n      JOIN services s ON b.service_id = s.id\r\n      JOIN users u1 ON b.customer_id = u1.id\r\n      JOIN users u2 ON s.provider_id = u2.id\r\n      WHERE b.customer_id = ? OR s.provider_id = ?\r\n      ORDER BY b.booking_date DESC, b.booking_time DESC\r\n    `, [userId, userId]);\r\n\r\n    return NextResponse.json({ bookings });\r\n  } catch (error) {\r\n    console.error('Bookings fetch error:', error);\r\n    return NextResponse.json({ bookings: [] });\r\n  }\r\n}\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const { service_id, customer_id, booking_date, booking_time, notes } = await request.json();\r\n\r\n    if (!service_id || !customer_id || !booking_date || !booking_time) {\r\n      return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\r\n    }\r\n\r\n    const [result] = await db.execute(\r\n      'INSERT INTO bookings (service_id, customer_id, booking_date, booking_time, notes) VALUES (?, ?, ?, ?, ?)',\r\n      [service_id, customer_id, booking_date, booking_time, notes || null]\r\n    );\r\n\r\n    return NextResponse.json({ message: 'Booking created', bookingId: result.insertId }, { status: 201 });\r\n  } catch (error) {\r\n    console.error('Booking creation error:', error);\r\n    return NextResponse.json({ error: 'Failed to create booking' }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function PATCH(request) {\r\n  try {\r\n    const { bookingId, status } = await request.json();\r\n\r\n    if (!bookingId || !status) {\r\n      return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\r\n    }\r\n\r\n    await db.execute(\r\n      'UPDATE bookings SET status = ? WHERE id = ?',\r\n      [status, bookingId]\r\n    );\r\n\r\n    return NextResponse.json({ message: 'Booking updated' });\r\n  } catch (error) {\r\n    console.error('Booking update error:', error);\r\n    return NextResponse.json({ error: 'Failed to update booking' }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAO;IAC/B,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;QAEhC,IAAI,CAAC,QAAQ;YACX,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,UAAU,EAAE;YAAC;QAC1C;QAEA,MAAM,CAAC,SAAS,GAAG,MAAM,gJAAE,CAAC,OAAO,CAAC,CAAC;;;;;;;;;;IAUrC,CAAC,EAAE;YAAC;YAAQ;SAAO;QAEnB,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,UAAU,EAAE;QAAC;IAC1C;AACF;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEzF,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,gBAAgB,CAAC,cAAc;YACjE,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,CAAC,OAAO,GAAG,MAAM,gJAAE,CAAC,OAAO,CAC/B,4GACA;YAAC;YAAY;YAAa;YAAc;YAAc,SAAS;SAAK;QAGtE,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAmB,WAAW,OAAO,QAAQ;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrG,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF;AAEO,eAAe,MAAM,OAAO;IACjC,IAAI;QACF,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEhD,IAAI,CAAC,aAAa,CAAC,QAAQ;YACzB,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,gJAAE,CAAC,OAAO,CACd,+CACA;YAAC;YAAQ;SAAU;QAGrB,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAkB;IACxD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF"}}]
}