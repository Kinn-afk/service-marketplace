{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/lib/db.js"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool({\r\n  host: 'localhost',\r\n  user: 'root',\r\n  password: '', \r\n  database: 'service_marketplace',\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,wKAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/app/api/users/profile/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport db from '@/lib/db';\r\n\r\nexport async function PATCH(request) {\r\n  try {\r\n    const { userId, name, phone, profile_image } = await request.json();\r\n\r\n    if (!userId) {\r\n      return NextResponse.json({ error: 'User ID required' }, { status: 400 });\r\n    }\r\n\r\n    // Build update query dynamically\r\n    let updateFields = [];\r\n    let updateValues = [];\r\n\r\n    if (name !== undefined) {\r\n      updateFields.push('name = ?');\r\n      updateValues.push(name);\r\n    }\r\n\r\n    if (phone !== undefined) {\r\n      updateFields.push('phone = ?');\r\n      updateValues.push(phone);\r\n    }\r\n\r\n    if (profile_image !== undefined) {\r\n      updateFields.push('profile_image = ?');\r\n      updateValues.push(profile_image);\r\n    }\r\n\r\n    if (updateFields.length === 0) {\r\n      return NextResponse.json({ error: 'No fields to update' }, { status: 400 });\r\n    }\r\n\r\n    updateValues.push(userId);\r\n\r\n    await db.execute(\r\n      `UPDATE users SET ${updateFields.join(', ')} WHERE id = ?`,\r\n      updateValues\r\n    );\r\n\r\n    // Get updated user\r\n    const [rows] = await db.execute(\r\n      'SELECT id, email, name, phone, role, profile_image, created_at FROM users WHERE id = ?',\r\n      [userId]\r\n    );\r\n\r\n    return NextResponse.json({ \r\n      message: 'Profile updated successfully',\r\n      user: rows[0]\r\n    });\r\n  } catch (error) {\r\n    console.error('Profile update error:', error);\r\n    return NextResponse.json({ error: 'Failed to update profile' }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,MAAM,OAAO;IACjC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjE,IAAI,CAAC,QAAQ;YACX,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,iCAAiC;QACjC,IAAI,eAAe,EAAE;QACrB,IAAI,eAAe,EAAE;QAErB,IAAI,SAAS,WAAW;YACtB,aAAa,IAAI,CAAC;YAClB,aAAa,IAAI,CAAC;QACpB;QAEA,IAAI,UAAU,WAAW;YACvB,aAAa,IAAI,CAAC;YAClB,aAAa,IAAI,CAAC;QACpB;QAEA,IAAI,kBAAkB,WAAW;YAC/B,aAAa,IAAI,CAAC;YAClB,aAAa,IAAI,CAAC;QACpB;QAEA,IAAI,aAAa,MAAM,KAAK,GAAG;YAC7B,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,aAAa,IAAI,CAAC;QAElB,MAAM,gJAAE,CAAC,OAAO,CACd,CAAC,iBAAiB,EAAE,aAAa,IAAI,CAAC,MAAM,aAAa,CAAC,EAC1D;QAGF,mBAAmB;QACnB,MAAM,CAAC,KAAK,GAAG,MAAM,gJAAE,CAAC,OAAO,CAC7B,0FACA;YAAC;SAAO;QAGV,OAAO,0KAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM,IAAI,CAAC,EAAE;QACf;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF"}}]
}