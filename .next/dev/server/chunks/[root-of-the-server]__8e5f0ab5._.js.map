{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/lib/db.js"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool({\r\n  host: 'localhost',\r\n  user: 'root',\r\n  password: '', \r\n  database: 'service_marketplace',\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,wKAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/app/api/photos/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport db from '@/lib/db';\r\n\r\nexport async function GET(request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const bookingId = searchParams.get('bookingId');\r\n\r\n    const [photos] = await db.execute(`\r\n      SELECT p.*, u.name as uploader_name\r\n      FROM work_photos p\r\n      JOIN users u ON p.uploaded_by = u.id\r\n      WHERE p.booking_id = ?\r\n      ORDER BY p.created_at DESC\r\n    `, [bookingId]);\r\n\r\n    return NextResponse.json({ photos });\r\n  } catch (error) {\r\n    return NextResponse.json({ error: 'Failed to fetch photos' }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const { booking_id, uploaded_by, photo_url, caption } = await request.json();\r\n\r\n    if (!booking_id || !uploaded_by || !photo_url) {\r\n      return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\r\n    }\r\n\r\n    const [result] = await db.execute(\r\n      'INSERT INTO work_photos (booking_id, uploaded_by, photo_url, caption) VALUES (?, ?, ?, ?)',\r\n      [booking_id, uploaded_by, photo_url, caption]\r\n    );\r\n\r\n    return NextResponse.json({ message: 'Photo uploaded', photoId: result.insertId }, { status: 201 });\r\n  } catch (error) {\r\n    return NextResponse.json({ error: 'Failed to upload photo' }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAO;IAC/B,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;QAEnC,MAAM,CAAC,OAAO,GAAG,MAAM,gJAAE,CAAC,OAAO,CAAC,CAAC;;;;;;IAMnC,CAAC,EAAE;YAAC;SAAU;QAEd,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE;QAAO;IACpC,EAAE,OAAO,OAAO;QACd,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE1E,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,WAAW;YAC7C,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM,CAAC,OAAO,GAAG,MAAM,gJAAE,CAAC,OAAO,CAC/B,6FACA;YAAC;YAAY;YAAa;YAAW;SAAQ;QAG/C,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAkB,SAAS,OAAO,QAAQ;QAAC,GAAG;YAAE,QAAQ;QAAI;IAClG,EAAE,OAAO,OAAO;QACd,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}