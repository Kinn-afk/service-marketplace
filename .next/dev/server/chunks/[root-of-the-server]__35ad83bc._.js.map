{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/lib/db.js"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool({\r\n  host: 'localhost',\r\n  user: 'root',\r\n  password: '', \r\n  database: 'service_marketplace',\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,wKAAK,CAAC,UAAU,CAAC;IAC5B,MAAM;IACN,MAAM;IACN,UAAU;IACV,UAAU;IACV,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;uCAEe"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/lib/auth.js"],"sourcesContent":["import bcrypt from 'bcryptjs';\r\nimport db from './db';\r\n\r\nexport async function hashPassword(password) {\r\n  return await bcrypt.hash(password, 12);\r\n}\r\n\r\nexport async function verifyPassword(password, hashedPassword) {\r\n  return await bcrypt.compare(password, hashedPassword);\r\n}\r\n\r\nexport async function createUser(email, password, name, role = 'customer') {\r\n  const hashedPassword = await hashPassword(password);\r\n  const [result] = await db.execute(\r\n    'INSERT INTO users (email, password, name, role) VALUES (?, ?, ?, ?)',\r\n    [email, hashedPassword, name, role]\r\n  );\r\n  return result.insertId;\r\n}\r\n\r\nexport async function getUserByEmail(email) {\r\n  const [rows] = await db.execute('SELECT * FROM users WHERE email = ?', [email]);\r\n  return rows[0];\r\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,eAAe,aAAa,QAAQ;IACzC,OAAO,MAAM,wKAAM,CAAC,IAAI,CAAC,UAAU;AACrC;AAEO,eAAe,eAAe,QAAQ,EAAE,cAAc;IAC3D,OAAO,MAAM,wKAAM,CAAC,OAAO,CAAC,UAAU;AACxC;AAEO,eAAe,WAAW,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,UAAU;IACvE,MAAM,iBAAiB,MAAM,aAAa;IAC1C,MAAM,CAAC,OAAO,GAAG,MAAM,gJAAE,CAAC,OAAO,CAC/B,uEACA;QAAC;QAAO;QAAgB;QAAM;KAAK;IAErC,OAAO,OAAO,QAAQ;AACxB;AAEO,eAAe,eAAe,KAAK;IACxC,MAAM,CAAC,KAAK,GAAG,MAAM,gJAAE,CAAC,OAAO,CAAC,uCAAuC;QAAC;KAAM;IAC9E,OAAO,IAAI,CAAC,EAAE;AAChB"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zero1/service-marketplace/app/api/auth/login/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { getUserByEmail, verifyPassword } from '@/lib/auth';\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const { email, password } = await request.json();\r\n\r\n    console.log('Login attempt for:', email); // Debug log\r\n\r\n    if (!email || !password) {\r\n      return NextResponse.json({ error: 'Email and password required' }, { status: 400 });\r\n    }\r\n\r\n    const user = await getUserByEmail(email);\r\n    console.log('User found:', user ? 'Yes' : 'No'); // Debug log\r\n\r\n    if (!user) {\r\n      return NextResponse.json({ error: 'Invalid email or password' }, { status: 401 });\r\n    }\r\n\r\n    const isValid = await verifyPassword(password, user.password);\r\n    console.log('Password valid:', isValid); // Debug log\r\n\r\n    if (!isValid) {\r\n      return NextResponse.json({ error: 'Invalid email or password' }, { status: 401 });\r\n    }\r\n\r\n    // Remove password from response\r\n    const { password: _, ...userWithoutPassword } = user;\r\n    return NextResponse.json({ user: userWithoutPassword }, { status: 200 });\r\n  } catch (error) {\r\n    console.error('Login error:', error); // Debug log\r\n    return NextResponse.json({ \r\n      error: 'Login failed: ' + error.message \r\n    }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,QAAQ,GAAG,CAAC,sBAAsB,QAAQ,YAAY;QAEtD,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,MAAM,OAAO,MAAM,IAAA,yJAAc,EAAC;QAClC,QAAQ,GAAG,CAAC,eAAe,OAAO,QAAQ,OAAO,YAAY;QAE7D,IAAI,CAAC,MAAM;YACT,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA4B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,MAAM,UAAU,MAAM,IAAA,yJAAc,EAAC,UAAU,KAAK,QAAQ;QAC5D,QAAQ,GAAG,CAAC,mBAAmB,UAAU,YAAY;QAErD,IAAI,CAAC,SAAS;YACZ,OAAO,0KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA4B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,gCAAgC;QAChC,MAAM,EAAE,UAAU,CAAC,EAAE,GAAG,qBAAqB,GAAG;QAChD,OAAO,0KAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACxE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB,QAAQ,YAAY;QAClD,OAAO,0KAAY,CAAC,IAAI,CAAC;YACvB,OAAO,mBAAmB,MAAM,OAAO;QACzC,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF"}}]
}